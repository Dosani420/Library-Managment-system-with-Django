{% extends 'staff_base.html' %}

{% block title %}Edit Book - Staff Dashboard{% endblock title %}

{% block body %}
<header class="dashboard-header">
    <div>
        <h1 style="font-size: 1.8rem; margin-bottom: 0.5rem;">Edit Book</h1>
        <p style="color: var(--text-secondary);">Update the details of the book.</p>
    </div>
</header>

<div class="glass-card" style="max-width: 800px; margin: 0 auto; padding: 2rem;">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
            <!-- Title -->
            <div class="form-group" style="grid-column: span 2;">
                <label class="form-label" for="title">Book Title</label>
                <input type="text" id="title" name="title" class="form-control" value="{{ book.Title }}" required>
            </div>

            <!-- Author -->
            <div class="form-group">
                <label class="form-label" for="author">Author</label>
                <input type="text" id="author" name="author" class="form-control" value="{{ book.Author }}" required>
            </div>

            <!-- ISBN -->
            <div class="form-group">
                <label class="form-label" for="isbn">ISBN</label>
                <input type="text" id="isbn" name="isbn" class="form-control" value="{{ book.ISBN }}" required>
            </div>

            <!-- Published Date -->
            <div class="form-group">
                <label class="form-label" for="published_date">Published Date</label>
                <input type="date" id="published_date" name="published_date" class="form-control"
                    value="{{ book.Published_date|date:'Y-m-d' }}" required>
            </div>

            <!-- Genre -->
            <div class="form-group">
                <label class="form-label" for="genre">Genre</label>
                <select id="genre" name="genre" class="form-control" required>
                    <option value="">Select Genre</option>
                    <option value="fiction" {% if book.Genre == 'fiction' %}selected{% endif %}>Fiction</option>
                    <option value="nonfiction" {% if book.Genre == 'nonfiction' %}selected{% endif %}>Non-Fiction
                    </option>
                    <option value="science" {% if book.Genre == 'science' %}selected{% endif %}>Science</option>
                    <option value="history" {% if book.Genre == 'history' %}selected{% endif %}>History</option>
                    <option value="biography" {% if book.Genre == 'biography' %}selected{% endif %}>Biography</option>
                    <option value="mystery" {% if book.Genre == 'mystery' %}selected{% endif %}>Mystery</option>
                    <option value="romance" {% if book.Genre == 'romance' %}selected{% endif %}>Romance</option>
                    <option value="selfhelp" {% if book.Genre == 'selfhelp' %}selected{% endif %}>Self Help</option>
                    <option value="thriller" {% if book.Genre == 'thriller' %}selected{% endif %}>Thriller</option>
                    <option value="youngadult" {% if book.Genre == 'youngadult' %}selected{% endif %}>Young Adult
                    </option>
                </select>
            </div>

            <!-- Price -->
            <div class="form-group">
                <label class="form-label" for="price">Price ($)</label>
                <input type="number" id="price" name="price" class="form-control" value="{{ book.Price }}" step="0.01"
                    required>
            </div>

            <!-- Pages -->
            <div class="form-group">
                <label class="form-label" for="pages">Pages</label>
                <input type="number" id="pages" name="pages" class="form-control" value="{{ book.Pages }}" required>
            </div>

            <!-- Image -->
            <div class="form-group" style="grid-column: span 2;">
                <label class="form-label" for="image">Book Cover Image</label>
                {% if book.Image %}
                <div style="margin-bottom: 0.5rem;">
                    <img src="{{ book.Image.url }}" alt="Current Cover"
                        style="height: 100px; border-radius: var(--radius-sm);">
                </div>
                {% endif %}
                <input type="file" id="image" name="image" class="form-control" accept="image/*">
                <p style="font-size: 0.85rem; color: var(--text-muted); margin-top: 0.5rem;">Leave blank to keep
                    current image.</p>
            </div>
        </div>

        <div style="margin-top: 2rem; display: flex; justify-content: flex-end; gap: 1rem;">
            <a href="#" class="btn btn-secondary">Cancel</a>
            <button type="submit" class="btn btn-primary">Update Book</button>
        </div>
    </form>
</div>
{% endblock body %}