{% extends 'member_base.html' %}

{% block title %}
Fines
{% endblock title %}



{% block body %}

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">ðŸ“–</div>
        <div>
            <div style="font-size: 2rem; font-weight: 700;">{{ borrowed_books_count|default:"0" }}</div>
            <div style="color: var(--text-muted); font-size: 0.9rem;">Books Borrowed</div>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1); color: var(--success);">âœ…</div>
        <div>
            <div style="font-size: 2rem; font-weight: 700;">{{ returned_books_count|default:"0" }}</div>
            <div style="color: var(--text-muted); font-size: 0.9rem;">Books Returned</div>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon" style="background: rgba(239, 68, 68, 0.1); color: var(--danger);">ðŸ’°</div>
        <div>
            <div style="font-size: 2rem; font-weight: 700;">PKR {{ total_fines|default:"0" }}</div>
            <div style="color: var(--text-muted); font-size: 0.9rem;">Outstanding Fines</div>
        </div>
    </div>
</div>

{% comment %} FInes History {% endcomment %}
<div
    style="background: white; border-radius: var(--radius-md); box-shadow: 0 2px 8px rgba(0,0,0,0.05); overflow: hidden;">
    <div style="padding: 1.5rem; border-bottom: 1px solid var(--border-light);">
        <h2 style="font-size: 1.25rem; font-weight: 700;">Borrowing History</h2>
    </div>

    <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: var(--bg-body); text-align: left;">
                    <th
                        style="padding: 1rem 1.5rem; font-weight: 600; color: var(--text-muted); font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.05em;">
                        Book Details</th>
                    <th
                        style="padding: 1rem 1.5rem; font-weight: 600; color: var(--text-muted); font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.05em;">
                        Borrowed On</th>
                    <th
                        style="padding: 1rem 1.5rem; font-weight: 600; color: var(--text-muted); font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.05em;">
                        Returned On</th>
                    <th
                        style="padding: 1rem 1.5rem; font-weight: 600; color: var(--text-muted); font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.05em;">
                        Fine Paid</th>
                </tr>
            </thead>
            <tbody>
                {% for record in fines %}
                <tr style="border-bottom: 1px solid var(--border-light);">
                    <td style="padding: 1rem 1.5rem;">
                        <div style="font-weight: 600; color: var(--text-main);">{{ record.book.Title }}</div>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">{{ record.book.Author }}
                        </div>
                    </td>
                    <td style="padding: 1rem 1.5rem; color: var(--text-secondary);">{{ record.borrow_date }}</td>
                    <td style="padding: 1rem 1.5rem; color: var(--text-secondary);">{{ record.return_date }}</td>
                    <td style="padding: 1rem 1.5rem; color: var(--text-secondary);">
                        {% if record.fine > 0 %}
                        <span style="color: var(--danger);">â‚¹{{ record.fine }}</span>
                        {% else %}
                        -
                        {% endif %}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4" style="padding: 2rem; text-align: center; color: var(--text-muted);">
                        No history available.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock body %}