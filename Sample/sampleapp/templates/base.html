<!DOCTYPE html>
{% load static %}
<html lang="en">
<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock title %}</title>
    <link rel="stylesheet" href="{% static 'sampleapp/premium_style.css' %}">
    <style>
        /* Sidebar Overlay Mode */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 280px;
            background: #fff;
            z-index: 1000;
            transform: translateX(-100%);
            /* Hidden by default */
            transition: transform 0.3s ease;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            padding-top: 60px;
            /* Space for the button if inside, but we are moving it out */
        }

        .sidebar.open {
            transform: translateX(0);
            /* Visible */
        }

        .main-content {
            margin-left: 0 !important;
            /* Content never moves */
            padding: 2rem;
            width: 100%;
            transition: filter 0.3s ease;
        }

        /* Overlay Backdrop */
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 900;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .sidebar-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Hamburger Button - Fixed */
        #sidebarToggle {
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 1100;
            /* Above sidebar */
            background: white;
            border: 1px solid var(--border-light);
            padding: 0.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 1.5rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        /* Adjust sidebar logo since button is gone */
        .sidebar-logo {
            justify-content: center;
            margin-bottom: 2rem;
        }
    </style>
</head>

<body>
    <!-- Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Toggle Button -->
    <button id="sidebarToggle">â˜°</button>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-logo">
            <div style="display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 2rem;">âš¡</span>
                <span class="logo-text">UserHub</span>
            </div>
        </div>
        <nav>
            <a href="{% url 'user' %}" class="nav-item active">
                <span>ğŸ“Š</span> <span class="nav-text">Dashboard</span>
            </a>
            <a href="{% url 'add_book' %}" class="nav-item">
                <span>ğŸ“š</span> <span class="nav-text">Add Book</span>
            </a>
            <a href="#" class="nav-item">
                <span></span> <span class="nav-text">Books</span>
            </a>
            <a href="#" class="nav-item">
                <span>ğŸ‘¨â€ğŸ’¼</span> <span class="nav-text">Staff</span>
            </a>
            <a href="#" class="nav-item">
                <span>ğŸ‘¥</span> <span class="nav-text">Members</span>
            </a>
            <a href="#" class="nav-item">
                <span>ğŸ“–</span> <span class="nav-text">Loans</span>
            </a>
            <a href="#" class="nav-item">
                <span>ğŸ“…</span> <span class="nav-text">Reservations</span>
            </a>
            <a href="#" class="nav-item">
                <span>ğŸ’°</span> <span class="nav-text">Fines</span>
            </a>
            <a href="#" class="nav-item">
                <span>ğŸ“ˆ</span> <span class="nav-text">Reports</span>
            </a>
            <a href="#" class="nav-item">
                <span>âš™ï¸</span> <span class="nav-text">Settings</span>
            </a>
        </nav>
        <div style="margin-top: auto;">
            <a href="{% url 'logout' %}" class="nav-item" style="color: var(--danger);">
                <span>ğŸšª</span> <span class="nav-text">Logout</span>
            </a>
        </div>
    </aside>

    <div class="main-content">
        {% block body %}
        {% endblock body %}
    </div>

    <script>
        const sidebar = document.getElementById('sidebar');
        const toggleBtn = document.getElementById('sidebarToggle');
        const overlay = document.getElementById('sidebarOverlay');
        const body = document.body;

        function toggleSidebar() {
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
        }

        function closeSidebar() {
            sidebar.classList.remove('open');
            overlay.classList.remove('active');
        }

        if (toggleBtn) {
            toggleBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // Prevent immediate closing if clicking button
                toggleSidebar();
            });
        }

        if (overlay) {
            overlay.addEventListener('click', closeSidebar);
        }

        // Close on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeSidebar();
            }
        });
    </script>
</body>

</html>